{{ if .Values.openfga.datastore.secret.create }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ .Values.openfga.datastore.secret.name }}
  namespace: {{ .Release.Namespace }}
type: Opaque
data:
  uri: {{ printf "postgres://%s:%s@%s:5432/postgres" .Values.openfga.datastore.auth.username .Values.openfga.datastore.auth.password .Values.openfga.datastore.databaseService | b64enc }}
{{- end }}
