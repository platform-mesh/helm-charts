{{- if (.Values.kcp.webhook).enabled }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ .Values.kcp.webhook.authorizationWebhookSecretName }}
type: Opaque
stringData:
  kubeconfig: |
    apiVersion: v1
    kind: Config
    clusters:
    - name: webhook
      cluster:
          {{- with .Values.kcp.webhook.caData }}
          certificate-authority-data: {{ . }}
          {{- end }}
          server: {{ .Values.kcp.webhook.server }}
    current-context: webhook
    contexts:
    - name: webhook
      context:
        cluster: webhook
{{- end }}