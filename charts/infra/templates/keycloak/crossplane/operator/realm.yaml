{{- if eq (include "common.getKeyValue" (dict "Values" .Values "key" "crossplane.enabled")) "true" -}}
{{- if .Values.keycloak.crossplane.operator.enabled -}}
apiVersion: realm.keycloak.crossplane.io/v1alpha1
kind: Realm
metadata:
  name: {{ .Values.keycloak.crossplane.operator.realm.name }}
spec:
  forProvider:
    accessTokenLifespan: {{ .Values.keycloak.crossplane.operator.realm.accessTokenLifespan }}
    ssoSessionIdleTimeout: {{ .Values.keycloak.crossplane.operator.realm.accessTokenLifespan }}
    attributes:
      organizationsEnabled: "true"
    displayName: {{ .Values.keycloak.crossplane.operator.realm.displayName }}
    displayNameHtml: <b>{{ .Values.keycloak.crossplane.operator.realm.displayName }}</b>
    enabled: true
    realm: {{ .Values.keycloak.crossplane.operator.realm.name }}
    loginWithEmailAllowed: true
    registrationEmailAsUsername: true
    registrationAllowed: {{ .Values.keycloak.crossplane.operator.realm.registrationAllowed }}
  providerConfigRef:
    name: {{ .Values.keycloak.crossplane.providerConfig.name }}
{{- end -}}
{{- end -}}