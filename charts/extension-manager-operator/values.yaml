# The image configuration for the Extension Manager Operator
## @param image.name The image repository
## @param image.tag The image tag
image:
  name: ghcr.io/platform-mesh/extension-manager-operator
  ## Overwrite this value to use a different image tag then the .chart.appVersion
  # tag: v0.0.0

# The Custom Resource Definitions (CRDs) configuration
## @param crds.enabled Enable or disable the CRDs
crds:
  enabled: true

## @param commonAnnotations Annotations to add to all deployed objects
##
commonAnnotations: {}

validationServer:
  # -- port for the validation server
  port: 8088
  # -- host for the validation VirtualService
  host: "*"

istio:
  # -- enable Istio VirtualService
  enabled: false

## @param kubeconfigSecret The secret containing the kubeconfig for the operator
kubeconfigSecret: ""

kcp:
  # -- enable the kcp mode of the operator
  enabled: false
  # -- secret that holds the kubeconfig for the KCP API server (same structure as rebac-authz-webhook)
  kubeconfig:
    secret: extension-manager-operator-kubeconfig
  # -- KCP APIExportEndpointSliceName to watch. Empty string = omit flag / auto-discover (same as rebac-authz-webhook)
  apiExportEndpointSliceName: ""

# -- Path prefix for routing rules in Gateway API and Istio VirtualService
pathPrefix: /validate

traefik:
  # -- toggle to enable traefik CORS filter in HTTPRoute
  enabled: true

gatewayApi:
  # -- Toggle to enable/disable Gateway API resources
  enabled: false
  # -- Name of the Gateway resource
  name: k8sapi-gateway
  # -- HTTPS Terminate configuration
  main:
    gateway:
      port: 8443
      name: websecure
  httpRoute:
    # -- list of HTTPRoute filters (default: none)
    filters: []
    # -- CORS filter referencing traefik middleware (used when traefik.enabled=true)
    corsFilters:
      - type: ExtensionRef
        extensionRef:
          group: traefik.io
          kind: Middleware
          name: cors-header
