{{- if .Values.ocm.component.create }}
apiVersion: delivery.ocm.software/v1alpha1
kind: Component
metadata:
  name: {{ .Values.ocm.component.name }}
spec:
  repositoryRef:
    name: {{ .Values.ocm.repo.name }}
  component: github.com/platform-mesh/platform-mesh
  semver: {{ .Values.componentVersion.semver }}
  interval: 1m
  ocmConfig:
    - kind: Repository
      apiVersion: delivery.ocm.software/v1alpha1
      name: {{ .Values.ocm.repo.name }}
      namespace: {{ .Release.Namespace }}
{{- end }}