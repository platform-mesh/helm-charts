image:
  name: ghcr.io/platform-mesh/security-operator

# -- environment indicator, used for logging and observability
environment: local
# -- region indicator, used for logging and observability
region: local

deployment:
  revisionHistoryLimit: 3
  resources:
    limits:
      cpu: 260m
      memory: 512Mi
    requests:
      cpu: 150m
      memory: 128Mi

crds:
  enabled: false

logLevel: info

# -- The kubeconfig secret for operator and generator
kubeconfigSecret: ""

initializer:
  # -- The kubeconfig secret for the initializer
  kubeconfigSecret: ""

fga:
  target: platform-mesh-openfga.platform-mesh-system.svc.cluster.local:8081

hostAliases:
  enabled: true
  items:
    - ip: 10.96.0.100
      hostnames:
        - kcp.dev.local

coreModule: |-

  module core

  type user

  type role
    relations
      define assignee: [user,user:*]

  type core_platform-mesh_io_account
    relations

      define parent: [core_platform-mesh_io_account]
      define owner: [role#assignee]
      define member: [role#assignee] or owner

      define get: member or get from parent
      define update: member or update from parent
      define delete: owner or delete from parent

      define create_core_platform-mesh_io_accounts: member
      define list_core_platform-mesh_io_accounts: member
      define watch_core_platform-mesh_io_accounts: member

      define member_manage: owner or owner from parent

      # org and account specific
      define watch: member or watch from parent

      # org specific
      define create: member or create from parent
      define list: member or list from parent

      define create_core_namespaces: member
      define list_core_namespaces: member
      define watch_core_namespaces: member

      define create_core_platform-mesh_io_accountinfos: member
      define list_core_platform-mesh_io_accountinfos: member
      define watch_core_platform-mesh_io_accountinfos: member

  type core_namespace
    relations
      define parent: [core_platform-mesh_io_account]

      define member: member from parent
      define owner: owner from parent

      define get: get from parent
      define update: update from parent
      define delete: delete from parent

      # org and account specific
      define watch: watch from parent

      # org specific
      define create: create from parent
      define list: list from parent

  type core_platform-mesh_io_accountinfo
    relations

      define parent: [core_platform-mesh_io_account]

      define get: get from parent
      define update: update from parent
      define delete: delete from parent

      # org and account specific
      define watch: watch from parent

      # org specific
      define create: create from parent
      define list: list from parent
